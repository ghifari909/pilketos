<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Pilketos 2025 - SMK Negeri 1 Dukuhturi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- PWA Metadata -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2563eb">
  <link rel="icon" href="favicon1.ico" type="image/x-icon">
  <link rel="icon" href="icons/icon-192.png" type="image/png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1e4ed8;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --bg: #f9fafb;
      --card-bg: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --border: #e5e7eb;
      --radius: 12px;
      --shadow: 0 4px 12px rgba(0,0,0,0.08);
      --accent-1: #6366f1;
      --accent-2: #8b5cf6;
      --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .page-container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .page {
      display: none;
      width: 100%;
      min-height: 100vh;
      padding: 20px;
    }

    .page.visible {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    /* Landing Page Styles */
    #landing-page {
      text-align: center;
    }

    .landing-content {
      max-width: 600px;
      padding: 40px;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin: 0 auto;
    }

    .school-logo {
      max-width: 120px;
      margin-bottom: 20px;
    }

    .welcome-title {
      font-size: 2.5rem;
      color: var(--primary);
      margin-bottom: 10px;
      font-weight: 700;
    }

    .welcome-subtitle {
      font-size: 1.2rem;
      color: var(--muted);
      margin-bottom: 30px;
      font-weight: 400;
    }

    /* Button Styles */
    .btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: var(--radius);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    .btn:disabled {
      background: var(--muted);
      cursor: not-allowed;
      transform: none;
    }

    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: white;
    }

    .btn-center {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 20px;
      width: 100%;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
    }

    .form-control {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-size: 1rem;
      transition: var(--transition);
      font-family: 'Poppins', sans-serif;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .input-error {
      border-color: var(--danger);
    }

    .error-message {
      color: var(--danger);
      font-size: 0.85rem;
      margin-top: 5px;
      display: none;
    }

    /* Tab Navigation */
    .tab-navigation {
      display: flex;
      background: var(--border);
      border-radius: var(--radius);
      padding: 4px;
      margin-bottom: 20px;
    }

    .tab-item {
      flex: 1;
      text-align: center;
      padding: 12px;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-weight: 500;
    }

    .tab-item.active {
      background: var(--primary);
      color: white;
      box-shadow: var(--shadow);
    }

    /* ID Type Selection */
    .id-type-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .id-type-box {
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .id-type-box.active {
      border-color: var(--primary);
      background: rgba(37, 99, 235, 0.05);
    }

    .id-type-icon {
      font-size: 24px;
      margin-bottom: 8px;
      color: var(--primary);
    }

    .id-type-title {
      font-weight: 600;
    }

    /* Autocomplete Styles */
    .autocomplete-container {
      position: relative;
    }

    .autocomplete-list {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
      margin-top: 4px;
      display: none;
    }

    .autocomplete-item {
      padding: 12px 16px;
      cursor: pointer;
      transition: var(--transition);
      font-family: 'Poppins', sans-serif;
    }

    .autocomplete-item:hover, .autocomplete-item.highlighted {
      background: rgba(37, 99, 235, 0.1);
    }

    /* Card Styles */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 24px;
      margin-bottom: 20px;
    }

    .card-header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }

    .card-title {
      font-size: 1.8rem;
      color: var(--primary);
      margin-bottom: 8px;
      font-weight: 700;
    }

    .card-subtitle {
      color: var(--muted);
      font-weight: 400;
    }

    /* Candidate Section */
    .candidate-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .candidate-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 20px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid transparent;
    }

    .candidate-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    .candidate-card.active {
      border-color: var(--primary);
    }

    .candidate-number {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 40px;
      height: 40px;
      background: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      z-index: 3;
      box-shadow: var(--shadow);
    }

    .candidate-content {
      position: relative;
      z-index: 2;
    }

    .option-image {
      width: 100%;
      border-radius: var(--radius);
      margin-bottom: 16px;
      aspect-ratio: 16/9;
      object-fit: cover;
    }

    .option-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--text);
    }

    .vision-mission {
      color: var(--muted);
    }

    .vision-mission h4 {
      color: var(--text);
      margin-top: 12px;
      margin-bottom: 4px;
      font-weight: 600;
    }

    .vision-mission ul {
      padding-left: 20px;
    }

    .vision-mission li {
      margin-bottom: 4px;
    }

    .read-more-btn {
      color: var(--primary);
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-top: 12px;
      cursor: pointer;
    }

    /* Checkbox Styles */
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
    }

    .checkbox-group input[type="checkbox"] {
      width: 18px;
      height: 18px;
    }

    /* Notification Styles */
    .notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .notification {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      animation: slideIn 0.3s ease;
      max-width: 350px;
    }

    .notification.success {
      border-left: 4px solid var(--success);
    }

    .notification.error {
      border-left: 4px solid var(--danger);
    }

    .notification.warning {
      border-left: 4px solid var(--warning);
    }

    .notification.info {
      border-left: 4px solid var(--primary);
    }

    .notification-content {
      flex: 1;
    }

    .notification-close {
      cursor: pointer;
      padding: 4px;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Modal Styles */
    .modal-overlay, .confirmation-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    .modal-overlay.active, .confirmation-modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal, .confirmation-modal {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-close, .confirmation-modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      cursor: pointer;
      z-index: 10;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: var(--bg);
    }

    .modal-header {
      padding: 24px 24px 0;
      text-align: center;
    }

    .modal-title {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 4px;
      font-weight: 700;
    }

    .modal-subtitle {
      color: var(--muted);
      font-weight: 400;
    }

    .modal-image {
      width: 100%;
      border-radius: var(--radius);
      margin: 16px 0;
      aspect-ratio: 16/9;
      object-fit: cover;
    }

    .vision-mission {
      padding: 0 24px 24px;
    }

    /* Confirmation Modal */
    .confirmation-container {
      padding: 24px;
    }

    .confirmation-title {
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary);
      font-weight: 700;
    }

    .confirmation-data {
      background: var(--bg);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 20px;
    }

    .confirmation-row {
      display: flex;
      margin-bottom: 12px;
    }

    .confirmation-row:last-child {
      margin-bottom: 0;
    }

    .confirmation-label {
      font-weight: 600;
      width: 80px;
      flex-shrink: 0;
    }

    .confirmation-value {
      flex: 1;
    }

    .confirmation-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .confirmation-actions .btn {
      min-width: 140px;
    }

    /* Welcome Container */
    .welcome-container {
      text-align: center;
      max-width: 600px;
      padding: 40px;
      background: var(--primary);
      color: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .welcome-container .logo {
      margin-bottom: 20px;
    }

    .welcome-text {
      margin-bottom: 16px;
    }

    /* Mobile Header */
    .mobile-header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }

    .mobile-header .osis-logo {
      max-width: 200px;
      margin-bottom: 16px;
    }

    .mobile-header h1 {
      font-size: 1.8rem;
      color: var(--primary);
      margin-bottom: 8px;
      font-weight: 700;
    }

    .mobile-header p {
      color: var(--muted);
      font-weight: 400;
    }

    /* Personal Welcome */
    .personal-welcome {
      background: var(--primary);
      color: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 20px;
      margin-bottom: 30px;
      text-align: center;
    }

    .welcome-greeting {
      font-size: 1.5rem;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .welcome-info {
      opacity: 0.9;
      font-weight: 400;
    }

    /* Loading Animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Page Transitions */
    .slide-in {
      animation: slideInPage 0.3s ease;
    }

    .slide-out {
      animation: slideOutPage 0.3s ease;
    }

    @keyframes slideInPage {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideOutPage {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(-20px);
      }
    }

    /* Autocomplete positioning */
    .autocomplete-list {
      bottom: 100%;
      top: auto;
      max-height: 200px;
      overflow-y: auto;
    }

    /* Voting page header with logo */
    .voting-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .voting-header .osis-logo {
      max-width: 150px; /* Diperbesar dari 100px */
      margin-bottom: 16px;
    }

    /* Progress Stepper Styles */
    .progress-stepper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      margin: 30px 0;
      position: relative;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding-bottom: 10px;
    }

    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
      flex: 0 0 auto;
      min-width: 80px;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--border);
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-bottom: 8px;
      transition: var(--transition);
      font-size: 16px;
    }

    .step.active .step-circle {
      background-color: var(--primary);
      color: white;
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
    }

    .step.completed .step-circle {
      background-color: var(--success);
      color: white;
    }

    .step-text {
      font-size: 0.75rem;
      text-align: center;
      max-width: 90px;
      color: var(--muted);
      transition: var(--transition);
      line-height: 1.2;
      font-weight: 500;
    }

    .step.active .step-text,
    .step.completed .step-text {
      color: var(--text);
      font-weight: 600;
    }

    .step-connector {
      height: 2px;
      flex-grow: 1;
      min-width: 20px;
      background-color: var(--border);
      margin: 20px 5px 0;
      position: relative;
      transition: var(--transition);
    }

    .step-connector.completed {
      background-color: var(--success);
    }

    /* Blur effect for modals */
    .modal-blur {
      filter: blur(5px);
      transition: filter 0.3s ease;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .candidate-section {
        grid-template-columns: 1fr;
      }
      
      .id-type-grid {
        grid-template-columns: 1fr 1fr; /* Tetap horizontal di mobile */
        gap: 8px;
      }
      
      .id-type-box {
        padding: 12px 8px; /* Padding diperkecil untuk mobile */
      }
      
      .id-type-icon {
        font-size: 20px; /* Icon diperkecil sedikit */
      }
      
      .confirmation-actions {
        flex-direction: column;
        align-items: center;
      }
      
      .confirmation-actions .btn {
        width: 100%;
        max-width: 240px;
      }
      
      .tab-item {
        padding: 8px;
        font-size: 0.9rem;
      }
      
      .voting-header .osis-logo {
        max-width: 220px; /* atur sesuai kebutuhan */
        margin-bottom: 16px;
      }
      
      .progress-stepper {
        justify-content: flex-start;
        padding-bottom: 15px;
      }
      
      .step {
        min-width: 70px;
      }
      
      .step-text {
        font-size: 0.7rem;
        max-width: 70px;
      }
      
      .step-connector {
        min-width: 15px;
        margin: 20px 3px 0;
      }
    }

    @media (max-width: 480px) {
      .id-type-grid {
        grid-template-columns: 1fr 1fr; /* Tetap horizontal di layar kecil */
      }
      
      .id-type-title {
        font-size: 0.9rem; /* Ukuran font diperkecil */
      }
      
      .step {
        min-width: 60px;
      }
      
      .step-text {
        font-size: 0.65rem;
        max-width: 60px;
      }
      
      .step-circle {
        width: 35px;
        height: 35px;
        font-size: 14px;
      }
    }

    /* Hide scrollbar for progress stepper */
    .progress-stepper::-webkit-scrollbar {
      display: none;
    }
    
    .progress-stepper {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <div class="page-container">
    <!-- Landing Page -->
    <div id="landing-page" class="page visible">
      <div class="landing-content">
        <img src="assets/logosekolah.png" alt="Logo SMK Negeri 1 Dukuhturi" class="school-logo">
        
        <h1 class="welcome-title">Pilketos 2025<br>SMKN 1 Dukuhturi</h1>
        <p class="welcome-subtitle"><b>"Satu Suara, Satu Perubahan!"</b></p>
        
        <button class="btn" id="startButton">
          <i class="fas fa-vote-yea"></i> Mulai Memilih
        </button>
      </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="page">
      <div id="app" class="card" style="max-width: 500px; width: 100%;"></div>
    </div>

    <!-- Voting Page -->
    <div id="voting-page" class="page">
      <div id="voting-app" style="max-width: 1000px; width: 100%;">
        <div class="voting-header">
          <img src="assets/logoosisumum.png" alt="Logo OSIS" class="osis-logo">
          <h1 class="card-title">Pemilihan Ketua OSIS</h1>
          <p class="card-subtitle">SMK Negeri 1 Dukuhturi Tahun 2025</p>
        </div>
      </div>
    </div>
  </div>

  <div class="notification-container" id="notification-container"></div>

  <!-- Modal konfirmasi data -->
  <div class="confirmation-modal-overlay" id="confirmation-modal">
    <div class="confirmation-modal">
      <div class="confirmation-modal-close" onclick="closeConfirmationModal()">
        <i class="fas fa-times"></i>
      </div>
      <div class="confirmation-container">
        <h3 class="confirmation-title" id="confirmation-modal-title"></h3>
        <div class="confirmation-data">
          <div class="confirmation-row">
            <div class="confirmation-label">Nama:</div>
            <div class="confirmation-value" id="confirmation-nama"></div>
          </div>
          <div class="confirmation-row">
            <div class="confirmation-label" id="confirmation-id-label"></div>
            <div class="confirmation-value" id="confirmation-id-value"></div>
          </div>
          <div class="confirmation-row" id="confirmation-kelas-row">
            <div class="confirmation-label">Kelas:</div>
            <div class="confirmation-value" id="confirmation-kelas-value"></div>
          </div>
        </div>
        <div class="confirmation-actions">
          <button class="btn" onclick="confirmData()">
            <i class="fas fa-check"></i> Data Benar
          </button>
          <button class="btn btn-outline" onclick="closeConfirmationModal()">
            <i class="fas fa-times"></i> Perbaiki
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for candidate details -->
  <div class="modal-overlay" id="candidate-modal">
    <div class="modal">
      <div class="modal-close" onclick="closeModal()">
        <i class="fas fa-times"></i>
      </div>
      <div class="modal-header">
        <h2 class="modal-title" id="modal-candidate-name"></h2>
        <p class="modal-subtitle" id="modal-candidate-number"></p>
      </div>
      <img src="" alt="Candidate" class="modal-image" id="modal-candidate-image">
      <div class="vision-mission">
        <h4>Visi:</h4>
        <p id="modal-candidate-vision"></p>
        <h4>Misi:</h4>
        <ul id="modal-candidate-missions"></ul>
        <h4>Program Kerja:</h4>
        <ul id="modal-candidate-programs"></ul>
      </div>
    </div>
  </div>

  <!-- Audio element untuk suara vote -->
  <audio id="voteSound" src="assets/vote.mp3" preload="auto"></audio>

  <script>
    // Inisialisasi particles
    particlesJS('particles-js', {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: "#2563eb" },
        shape: { type: "circle" },
        opacity: { value: 0.5, random: true },
        size: { value: 3, random: true },
        line_linked: {
          enable: true,
          distance: 150,
          color: "#2563eb",
          opacity: 0.4,
          width: 1
        },
        move: {
          enable: true,
          speed: 2,
          direction: "none",
          random: true,
          straight: false,
          out_mode: "out",
          bounce: false
        }
      },
      interactivity: {
        detect_on: "canvas",
        events: {
          onhover: { enable: true, mode: "grab" },
          onclick: { enable: true, mode: "push" },
          resize: true
        }
      }
    });

    // Elemen halaman
    const landingPage = document.getElementById('landing-page');
    const loginPage = document.getElementById('login-page');
    const votingPage = document.getElementById('voting-page');
    const app = document.getElementById("app");
    const votingApp = document.getElementById("voting-app");
    const notificationContainer = document.getElementById("notification-container");
    const candidateModal = document.getElementById("candidate-modal");
    const confirmationModal = document.getElementById("confirmation-modal");
    const voteSound = document.getElementById("voteSound");

    // Struktur entry yang baru
    const googleFormURL = 'https://docs.google.com/forms/d/e/1FAIpQLSfVoQtZ6jArSgZK0JGo6lQ-pfuw5rjRjoFYO1ZM9MKG4dVdKA/formResponse';
    const entryIDs = {
      Role: 'entry.1066257235',
      nis_nip: 'entry.136017605',
      nama: 'entry.1282344317',
      kelas: 'entry.2012395880',
      pilihan: 'entry.2020612217'
    };

    // Data kandidat (bisa diganti dengan data sebenarnya)
    const candidates = {
      "Paslon 1": {
        name: "Al Atamul Atiya & Rizka Khafa Azkiya",
        vision: "Mewujudkan OSIS SMK Negeri 1 Dukuhturi sebagai organisasi yang inspiratif dan berkarakter, serta menjadi wadah kolaborasi untuk siswa yang beriman, kreatif, dan berprestasi.",
        missions: [
          "Meningkatkan keimanan dan tanggung jawab siswa melalui kegiatan yang menumbuhkan rasa kekeluargaan dan kekompakan.",
          "Menjadikan OSIS SMKN 1 Dukuhturi sebagai wadah aspirasi dan ruang kolaborasi bagi siswa untuk menyalurkan bakat, minat, dan kreativitas.",
           "Menanamkan prinsip kerja yang transparan, aktif dalam menanggapi saran dan kritik mengenai program-program yang terlaksana.",
            "Membangun hubungan yang harmonis antara OSIS, siswa, ekstrakurikuler, dan seluruh warga sekolah.",
          "Menciptakan lingkungan sekolah yang bersih, tertib, dan kondusif untuk mendukung kegiatan belajar dan pengembangan diri siswa."
        ],
        programs: [
          "Mading Fest SMKDU",
          "FORSE (Forum Sharing Ekstrakurikuler)"
        ],
        image: "assets/paslon1.png"
      },
      "Paslon 2": {
        name: "Aldityawan Ramadani S.P & M.Raihan Ahnaf",
        vision: "Mewujudkan lingkungan sekolah yang harmonis dan nyaman untuk menciptakan lingkungan belajar yang kondusif, sehingga mampu mencetak siswa berprestasi, kreatif, inovatif, berakhlak mulia, serta menjunjung tinggi nilai keagamaan, toleransi, & kebersamaan.",
        missions: [
          "Menumbuhkan budaya berpikir kreatif, inovatif, dan solutif di kalangan siswa",
          "Memperkuat nilai keagamaan dan toleransi",
          "Meningkatkan partisipasi siswa"
        ],
        programs: [
          "Pembuatan program Duta Sekolah yakni Putra & Putri SMEKAR",
          "PELOPOR MUDA"
        ],
        image: "assets/paslon2.png"
      }
    };

    // Daftar kelas yang tersedia
    const daftarKelas = [
      "X AKL 1", "X AKL 2", "X AKL 3", "X AKL 4",
      "X MPLB 1", "X MPLB 2", "X MPLB 3",
      "X PM 1", "X PM 2", "X PM 3",
      "X DKV 1", "X DKV 2", "X DKV 3",
      "X TJKT 1", "X TJKT 2", "X PPLG",
      "XI AK 1", "XI AK 2", "XI AK 3", "XI AK 4",
      "XI MP 1", "XI MP 2", "XI MP 3",
      "XI BR 1", "XI BR 2", "XI BD",
      "XI DKV 1", "XI DKV 2", "XI DKV 3",
      "XI TKJ 1", "XI TKJ 2", "XI RPL",
      "XII AK 1", "XII AK 2", "XII AK 3", "XII AK 4",
      "XII MP 1", "XII MP 2", "XII MP 3",
      "XII BR 1", "XII BR 2", "XII BD",
      "XII DKV 1", "XII DKV 2", "XII DKV 3",
      "XII TKJ 1", "XII TKJ 2", "XII RPL"
    ];

    let role = "";
    let user = { nis_nip: "", nama: "", kelas: "" };
    let choice = "";
    let agreedToTerms = false;
    let idType = "NIP"; // Default untuk guru
    let currentStep = 1; // Untuk progress stepper

    // Fungsi untuk beralih antar halaman dengan animasi
    function showPage(pageToShow) {
      // Sembunyikan semua halaman
      document.querySelectorAll('.page').forEach(page => {
        if (page.classList.contains('visible')) {
          page.classList.add('slide-out');
          setTimeout(() => {
            page.classList.remove('visible');
            page.classList.remove('slide-out');
          }, 300);
        }
      });
      
      // Tampilkan halaman yang diminta
      setTimeout(() => {
        pageToShow.classList.add('visible');
        pageToShow.classList.add('slide-in');
        setTimeout(() => {
          pageToShow.classList.remove('slide-in');
        }, 300);
      }, 300);
      
      // Scroll ke atas
      window.scrollTo(0, 0);
    }

    // Tombol mulai memilih
    document.getElementById('startButton').addEventListener('click', function() {
      showPage(loginPage);
      renderLogin();
    });

    function showNotification(message, type="info") {
      const el = document.createElement("div");
      el.className = `notification ${type}`;
      el.innerHTML = `
        <div class="notification-content"><i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : 'info'}-circle"></i> ${message}</div>
        <div class="notification-close" onclick="this.parentElement.remove()"><i class="fas fa-times"></i></div>
      `;
      notificationContainer.appendChild(el);
      setTimeout(() => el.remove(), 3000);
    }

    function validateNIS(nis) {
      return /^\d{5}$/.test(nis);
    }

    function validateNIP(nip) {
      return /^\d{18}$/.test(nip);
    }
    
    function validateNIK(nik) {
      return /^\d{16}$/.test(nik);
    }
    
    // Validasi nama hanya huruf, spasi, titik, dan koma
    function validateName(name) {
      return /^[a-zA-Z\s.,]+$/.test(name);
    }

    function toUpperCaseInput(e) {
      // Hanya izinkan huruf, spasi, titik, dan koma (tidak menerima angka)
      e.target.value = e.target.value.replace(/[^a-zA-Z\s.,]/g, '').toUpperCase();
    }
    
    // Fungsi untuk membuat input kelas otomatis kapital tapi tetap bisa angka
    function toUpperCaseKelas(e) {
      e.target.value = e.target.value.toUpperCase();
    }

    function showCandidateModal(candidateKey) {
      const candidate = candidates[candidateKey];
      document.getElementById('modal-candidate-name').textContent = candidate.name;
      document.getElementById('modal-candidate-number').textContent = candidateKey;
      document.getElementById('modal-candidate-image').src = candidate.image;
      document.getElementById('modal-candidate-vision').textContent = candidate.vision;
      
      const missionsList = document.getElementById('modal-candidate-missions');
      missionsList.innerHTML = '';
      candidate.missions.forEach(mission => {
        const li = document.createElement('li');
        li.textContent = mission;
        missionsList.appendChild(li);
      });
      
      const programsList = document.getElementById('modal-candidate-programs');
      programsList.innerHTML = '';
      candidate.programs.forEach(program => {
        const li = document.createElement('li');
        li.textContent = program;
        programsList.appendChild(li);
      });
      
      // Tambahkan efek blur pada halaman belakang
      document.getElementById('voting-app').classList.add('modal-blur');
      candidateModal.classList.add('active');
    }

    function closeModal() {
      document.getElementById('voting-app').classList.remove('modal-blur');
      candidateModal.classList.remove('active');
    }

    function showConfirmationModal() {
      document.getElementById('confirmation-modal-title').textContent = 
        role === 'SISWA' ? 'KONFIRMASI DATA SISWA' : 'KONFIRMASI DATA GURU/STAF';
      
      document.getElementById('confirmation-nama').textContent = user.nama;
      
      if (role === 'SISWA') {
        document.getElementById('confirmation-id-label').textContent = 'NIS';
        document.getElementById('confirmation-id-value').textContent = user.nis_nip;
        document.getElementById('confirmation-kelas-value').textContent = user.kelas;
        document.getElementById('confirmation-kelas-row').style.display = 'flex';
      } else {
        document.getElementById('confirmation-id-label').textContent = idType;
        document.getElementById('confirmation-id-value').textContent = user.nis_nip;
        document.getElementById('confirmation-kelas-row').style.display = 'none';
      }
      
      // Tambahkan efek blur pada halaman belakang
      document.getElementById('app').classList.add('modal-blur');
      confirmationModal.classList.add('active');
    }

    function closeConfirmationModal() {
      document.getElementById('app').classList.remove('modal-blur');
      confirmationModal.classList.remove('active');
    }

    // Fungsi untuk membuat autocomplete
    function initAutocomplete() {
      const kelasInput = document.getElementById('kelas');
      const autocompleteList = document.createElement('div');
      autocompleteList.className = 'autocomplete-list';
      kelasInput.parentNode.appendChild(autocompleteList);
      
      let activeItem = -1;
      
      kelasInput.addEventListener('input', function() {
        const value = this.value.toUpperCase();
        activeItem = -1;
        
        // Kosongkan daftar autocomplete
        autocompleteList.innerHTML = '';
        autocompleteList.style.display = 'none';
        
        if (value.length < 1) return;
        
        // Filter kelas yang sesuai dengan input
        const filteredKelas = daftarKelas.filter(kelas => 
          kelas.toUpperCase().includes(value)
        );
        
        if (filteredKelas.length === 0) return;
        
        // Tampilkan daftar autocomplete
        autocompleteList.style.display = 'block';
        
        filteredKelas.forEach(kelas => {
          const item = document.createElement('div');
          item.className = 'autocomplete-item';
          item.textContent = kelas;
          item.addEventListener('click', function() {
            kelasInput.value = kelas;
            user.kelas = kelas;
            autocompleteList.style.display = 'none';
          });
          autocompleteList.appendChild(item);
        });
      });
      
      // Navigasi dengan keyboard
      kelasInput.addEventListener('keydown', function(e) {
        const items = autocompleteList.querySelectorAll('.autocomplete-item');
        
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          activeItem = (activeItem + 1) % items.length;
          updateActiveItem(items);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          activeItem = (activeItem - 1 + items.length) % items.length;
          updateActiveItem(items);
        } else if (e.key === 'Enter' && activeItem >= 0) {
          e.preventDefault();
          items[activeItem].click();
        }
      });
      
      // Sembunyikan autocomplete saat klik di luar
      document.addEventListener('click', function(e) {
        if (e.target !== kelasInput) {
          autocompleteList.style.display = 'none';
        }
      });
      
      function updateActiveItem(items) {
        items.forEach(item => item.classList.remove('highlighted'));
        if (activeItem >= 0 && items[activeItem]) {
          items[activeItem].classList.add('highlighted');
          items[activeItem].scrollIntoView({ block: 'nearest' });
        }
      }
    }

    // Fungsi untuk memilih tipe ID (NIP/NIK)
    function selectIdType(type, element) {
      idType = type;
      document.querySelectorAll(".id-type-box").forEach(item => {
        item.classList.remove("active");
      });
      element.classList.add("active");
      
      // Update placeholder dan validasi
      const idInput = document.getElementById("nis_nip");
      const idLabel = document.getElementById("id-type-label");
      const errorMessage = document.getElementById("nis_nip-error");
      
      if (type === "NIP") {
        idInput.placeholder = "18 digit NIP";
        idLabel.textContent = "NIP";
        errorMessage.textContent = "NIP harus 18 digit angka";
        idInput.maxLength = 18;
      } else {
        idInput.placeholder = "16 digit NIK";
        idLabel.textContent = "NIK";
        errorMessage.textContent = "NIK harus 16 digit angka";
        idInput.maxLength = 16;
      }
      
      // Reset nilai input
      idInput.value = "";
    }

    function renderLogin() {
      app.innerHTML = `
        <div class="mobile-header">
          <img src="assets/logoosis.png" alt="Logo OSIS" class="osis-logo">
          <h1>Yuk Kita Login!!</h1>
          <p>Pemilihan Ketua OSIS Tahun 2025</p>
        </div>
        
        <div class="form-group">
          
          <div class="tab-navigation">
            <div class="tab-item active" onclick="selectRole('SISWA', this)">
              <i class="fas fa-user-graduate"></i> Siswa
            </div>
            <div class="tab-item" onclick="selectRole('GURU/STAFF', this)">
              <i class="fas fa-chalkboard-teacher"></i> Guru/Staff
            </div>
          </div>
        </div>
        
        <div id="fields"></div>
        
        <div class="btn-center">
          <button class="btn" onclick="handleLogin()"><i class="fas fa-arrow-right"></i> Lanjutkan</button>
        </div>
      `;
      
      // Panggil selectRole untuk mengisi fields awal
      selectRole('SISWA', document.querySelector('.tab-item'));
    }

    function selectRole(selectedRole, element) {
      role = selectedRole;
      
      // Hapus active class dari semua tab
      document.querySelectorAll(".tab-item").forEach(item => {
        item.classList.remove("active");
      });
      
      // Tambahkan active class ke tab yang dipilih
      element.classList.add("active");
      
      const fields = document.getElementById("fields");
      if (role === "SISWA") {
        fields.innerHTML = `
          <div class="form-group">
            <label class="form-label">Nama Lengkap</label>
            <input class="form-control" id="nama" oninput="toUpperCaseInput(event)" placeholder="Contoh: AHMAD FADILAH">
            <div class="error-message" id="nama-error">Nama hanya boleh berisi huruf, spasi, titik, dan koma</div>
          </div>
          
          <div class="form-group">
            <label class="form-label">NIS</label>
            <input class="form-control" id="nis_nip" type="number" placeholder="5 digit NIS" maxlength="5">
            <div class="error-message" id="nis_nip-error">NIS harus 5 digit angka</div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Kelas</label>
            <div class="autocomplete-container">
              <input class="form-control" id="kelas" oninput="toUpperCaseKelas(event)" placeholder="Ketik nama kelas (contoh: X AKL 1)">
              <!-- Autocomplete list akan ditambahkan secara dinamis -->
            </div>
          </div>
        `;
        
        document.getElementById("nama").addEventListener("blur", function() {
          if (!validateName(this.value)) {
            this.classList.add("input-error");
            document.getElementById("nama-error").style.display = "block";
          } else {
            this.classList.remove("input-error");
            document.getElementById("nama-error").style.display = "none";
          }
        });
        
        document.getElementById("nis_nip").addEventListener("blur", function() {
          if (!validateNIS(this.value)) {
            this.classList.add("input-error");
            document.getElementById("nis_nip-error").style.display = "block";
          } else {
            this.classList.remove("input-error");
            document.getElementById("nis_nip-error").style.display = "none";
          }
        });
        
        // Inisialisasi autocomplete setelah elemen dibuat
        setTimeout(initAutocomplete, 0);
      } else if (role === "GURU/STAFF") {
        fields.innerHTML = `
          <div class="form-group">
            <label class="form-label">Login dengan</label>
            <div class="id-type-grid">
              <div class="id-type-box active" onclick="selectIdType('NIP', this)">
                <div class="id-type-icon"><i class="fas fa-id-card"></i></div>
                <div class="id-type-title">NIP</div>
              </div>
              <div class="id-type-box" onclick="selectIdType('NIK', this)">
                <div class="id-type-icon"><i class="fas fa-address-card"></i></div>
                <div class="id-type-title">NIK</div>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Nama Lengkap</label>
            <input class="form-control" id="nama" oninput="toUpperCaseInput(event)" placeholder="Contoh: DRS. BUDI SANTOSO, M.PD.">
            <div class="error-message" id="nama-error">Nama hanya boleh berisi huruf, spasi, titik, dan koma</div>
          </div>
          
          <div class="form-group">
            <label class="form-label" id="id-type-label">${idType}</label>
            <input class="form-control" id="nis_nip" type="number" placeholder="${idType === 'NIP' ? '18 digit NIP' : '16 digit NIK'}" maxlength="${idType === 'NIP' ? '18' : '16'}">
            <div class="error-message" id="nis_nip-error">${idType === 'NIP' ? 'NIP harus 18 digit angka' : 'NIK harus 16 digit angka'}</div>
          </div>
        `;
        
        document.getElementById("nama").addEventListener("blur", function() {
          if (!validateName(this.value)) {
            this.classList.add("input-error");
            document.getElementById("nama-error").style.display = "block";
          } else {
            this.classList.remove("input-error");
            document.getElementById("nama-error").style.display = "none";
          }
        });
        
        document.getElementById("nis_nip").addEventListener("blur", function() {
          let isValid = false;
          if (idType === "NIP") {
            isValid = validateNIP(this.value);
          } else {
            isValid = validateNIK(this.value);
          }
          
          if (!isValid) {
            this.classList.add("input-error");
            document.getElementById("nis_nip-error").style.display = "block";
          } else {
            this.classList.remove("input-error");
            document.getElementById("nis_nip-error").style.display = "none";
          }
        });
      } else fields.innerHTML = "";
    }

    function handleLogin() {
      if (!role) return showNotification("Silakan pilih role", "warning");
      
      user.nis_nip = document.getElementById("nis_nip").value.trim();
      user.nama = document.getElementById("nama").value.trim();
      
      if (role === "SISWA") {
        user.kelas = document.getElementById("kelas").value.trim();
        
        if (!user.nis_nip || !user.nama || !user.kelas) 
          return showNotification("Lengkapi semua data", "warning");
        
        if (!validateNIS(user.nis_nip)) 
          return showNotification("NIS harus 5 digit angka", "warning");
          
        if (!validateName(user.nama))
          return showNotification("Nama hanya boleh berisi huruf, spasi, titik, dan koma", "warning");
          
        // Validasi apakah kelas yang dimasukkan ada di daftar
        if (!daftarKelas.includes(user.kelas)) {
          return showNotification("Kelas tidak valid. Silakan pilih dari daftar yang tersedia", "warning");
        }
      }
      
      if (role === "GURU") {
        if (!user.nis_nip || !user.nama) 
          return showNotification("Lengkapi semua data", "warning");
        
        if (!validateName(user.nama))
          return showNotification("Nama hanya boleh berisi huruf, spasi, titik, dan koma", "warning");
        
        let isValid = false;
        if (idType === "NIP") {
          isValid = validateNIP(user.nis_nip);
          if (!isValid) return showNotification("NIP harus 18 digit angka", "warning");
        } else {
          isValid = validateNIK(user.nis_nip);
          if (!isValid) return showNotification("NIK harus 16 digit angka", "warning");
        }
      }
      
      // Tampilkan konfirmasi data sebelum melanjutkan
      showConfirmationModal();
    }

    function confirmData() {
      closeConfirmationModal();
      showNotification(`Selamat datang, ${user.nama}!`, "success");
      renderVotingPage();
    }

    // Fungsi untuk mengupdate progress stepper
    function updateProgressStepper(step) {
      const steps = document.querySelectorAll('.step');
      const connectors = document.querySelectorAll('.step-connector');
      
      steps.forEach((s, index) => {
        if (index + 1 < step) {
          s.classList.add('completed');
          s.classList.remove('active');
        } else if (index + 1 === step) {
          s.classList.add('active');
          s.classList.remove('completed');
        } else {
          s.classList.remove('active', 'completed');
        }
      });
      
      connectors.forEach((connector, index) => {
        if (index + 1 < step) {
          connector.classList.add('completed');
        } else {
          connector.classList.remove('completed');
        }
      });
    }

    function renderVotingPage() {
      showPage(votingPage);
      currentStep = 1; // Reset step ke 1
      
      votingApp.innerHTML = `
        <div class="voting-header">
          <img src="assets/logoosisumum.png" alt="Logo OSIS" class="osis-logo">
          <h1 class="card-title">Pemilihan Ketua OSIS</h1>
          <p class="card-subtitle">SMK Negeri 1 Dukuhturi Tahun 2025</p>
        </div>
        
        <div class="personal-welcome">
          <div class="welcome-greeting">Hai, ${user.nama}!</div>
          <div class="welcome-info">Sekarang Anda berada di halaman pemilihan kandidat OSIS SMK Negeri 1 Dukuhturi 2025/2026</div>
        </div>
        
        <div class="card-header">
          <h1 class="card-title">Pilih Kandidat OSIS</h1>
          <p class="card-subtitle">Gimana caranya? Gini Caranya !</p>
        </div>
        
        <!-- Progress Stepper -->
        <div class="progress-stepper">
          <div class="step active">
            <div class="step-circle">1</div>
            <div class="step-text">Lihat visi misi dan prokja paslon</div>
          </div>
          <div class="step-connector"></div>
          <div class="step">
            <div class="step-circle">2</div>
            <div class="step-text">Klik card paslon</div>
          </div>
          <div class="step-connector"></div>
          <div class="step">
            <div class="step-circle">3</div>
            <div class="step-text">Klik centang untuk konfirmasi pilihan</div>
          </div>
          <div class="step-connector"></div>
          <div class="step">
            <div class="step-circle">4</div>
            <div class="step-text">Klik kirim vote saya</div>
          </div>
          <div class="step-connector"></div>
          <div class="step">
            <div class="step-circle">5</div>
            <div class="step-text">Selesai</div>
          </div>
        </div>
        
        <div class="candidate-section">
          <div class="candidate-card" onclick="selectCandidate('Paslon 1', this)">
            <div class="candidate-number">1</div>
            <div class="candidate-content">
              <img class="option-image" src="${candidates['Paslon 1'].image}" alt="Paslon 1">
              <p class="option-name">${candidates['Paslon 1'].name}</p>
              <div class="vision-mission">
                <h4>Visi:</h4>
                <p>${candidates['Paslon 1'].vision}</p>
                <div class="read-more-btn" onclick="event.stopPropagation(); showCandidateModal('Paslon 1')">
                  Baca Selengkapnya <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>
          </div>
          
          <div class="candidate-card" onclick="selectCandidate('Paslon 2', this)">
            <div class="candidate-number">2</div>
            <div class="candidate-content">
              <img class="option-image" src="${candidates['Paslon 2'].image}" alt="Paslon 2">
              <p class="option-name">${candidates['Paslon 2'].name}</p>
              <div class="vision-mission">
                <h4>Visi:</h4>
                <p>${candidates['Paslon 2'].vision}</p>
                <div class="read-more-btn" onclick="event.stopPropagation(); showCandidateModal('Paslon 2')">
                  Baca Selengkapnya <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="checkbox-group">
          <input type="checkbox" id="agreeVote" onchange="agreedToTerms = this.checked; updateSubmitButton()">
          <label for="agreeVote">Saya yakin dengan pilihan saya dan siap untuk mengirim vote</label>
        </div>
        
        <div class="btn-center">
          <button class="btn" id="submitVoteBtn" onclick="handleVote()" disabled>
            <i class="fas fa-paper-plane"></i> Kirim Vote Saya
          </button>
        </div>
      `;
      
      // Update progress stepper ke step 1
      updateProgressStepper(1);
    }

    function selectCandidate(candidate, element) {
      choice = candidate;
      
      // Hapus kelas active dari semua card
      document.querySelectorAll('.candidate-card').forEach(card => {
        card.classList.remove('active');
      });
      
      // Tambahkan kelas active ke card yang dipilih
      element.classList.add('active');
      
      // Update progress stepper ke step 2
      currentStep = 2;
      updateProgressStepper(2);
      
      // Perbarui status tombol submit
      updateSubmitButton();
    }

    function updateSubmitButton() {
      const submitBtn = document.getElementById('submitVoteBtn');
      submitBtn.disabled = !(choice && agreedToTerms);
      
      // Update progress stepper jika checkbox dicentang
      if (agreedToTerms) {
        currentStep = 3;
        updateProgressStepper(3);
      }
    }

    async function handleVote() {
      const btn = document.getElementById("submitVoteBtn");
      btn.innerHTML = `<span class="loading"></span> Mengirim...`; 
      btn.disabled = true;
      
      // Update progress stepper ke step 4
      currentStep = 4;
      updateProgressStepper(4);
      
      try {
        const formData = new FormData();
        
        // Menambahkan data berdasarkan struktur entry yang baru
        formData.append(entryIDs.Role, role);
        formData.append(entryIDs.nis_nip, user.nis_nip);
        formData.append(entryIDs.nama, user.nama);
        formData.append(entryIDs.pilihan, choice);
        
        // Hanya tambahkan kelas jika role adalah siswa
        if (role === "SISWA") {
          formData.append(entryIDs.kelas, user.kelas);
        }
        
        await fetch(googleFormURL, { method: "POST", body: formData, mode: "no-cors" });
        
        showNotification("Vote berhasil dikirim!", "success");
        
        // Update progress stepper ke step 5
        currentStep = 5;
        updateProgressStepper(5);
        
        renderThanks();
        
      } catch {
        showNotification("Gagal mengirim data", "error");
        btn.innerHTML = `<i class="fas fa-paper-plane"></i> Kirim Vote Saya`; 
        btn.disabled = false;
        
        // Kembalikan progress stepper ke step 3
        currentStep = 3;
        updateProgressStepper(3);
      }
    }

    function renderThanks() {
      // Putar suara vote
      voteSound.play();
      
      votingApp.innerHTML = `
        <div class="welcome-container">
          <div class="logo"><i class="fas fa-check-circle" style="color: white; font-size: 48px;"></i></div>
          <h1 class="welcome-title" style="color: white;">Terima Kasih</h1>
          <p class="welcome-text">Suara Anda telah tercatat. Partisipasi Anda sangat berarti untuk kemajuan OSIS sekolah kita.</p>
          <p class="welcome-text">Anda memilih: <strong style="color: white;">${candidates[choice].name}</strong></p>
          <div class="btn-center">
            <button class="btn" onclick="backToLanding()" style="background: white; color: var(--primary);">
              <i class="fas fa-home"></i> Kembali ke Beranda
            </button>
          </div>
        </div>
      `;
      
      // Otomatis kembali ke beranda setelah 5 detik
      setTimeout(backToLanding, 5000);
      
      role = ""; 
      user = {}; 
      choice = "";
      agreedToTerms = false;
    }

    function backToLanding() {
      showPage(landingPage);
    }

    // Close modal when clicking outside
    candidateModal.addEventListener('click', function(e) {
      if (e.target === candidateModal) {
        closeModal();
      }
    });

    confirmationModal.addEventListener('click', function(e) {
      if (e.target === confirmationModal) {
        closeConfirmationModal();
      }
    });

    // Inisialisasi halaman landing sebagai halaman pertama
    showPage(landingPage);

    // Register Service Worker untuk PWA
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/service-worker.js");
    }
  </script>
</body>
</html>